<div class="stream-wrapper">
  <h2>Live –°—Ç—Ä—ñ–º</h2>

  <div class="content-layout">
    <div class="left-side">
      <div class="video-container">
        <ng-container *ngIf="isStreaming; else noStream">
          <img
            #streamImage
            [src]="streamUrl"
            (load)="onImageLoaded()"
            alt="Live stream"
            use-credentials
          />
          <canvas #canvas hidden></canvas>
        </ng-container>
      
        <ng-template #noStream>
          <div class="placeholder-text">
            –¢—Ä–∞–Ω—Å–ª—è—Ü—ñ—è –≤–∏–º–∫–Ω–µ–Ω–∞<br />
            –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å ‚Äú–ü–æ—á–∞—Ç–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é‚Äù
          </div>
        </ng-template>
      </div>
      

      <div class="controls">
        <!-- <button class="btn">üî¥ –ü–æ—á–∞—Ç–∏ –∑–∞–ø–∏—Å</button> -->
        <button 
        class="button" 
        [disabled]="!isStreaming"
        [ngClass]="{ 'primary': isRecording, 'secondary': !isRecording }"
        (click)="toggleRecording()">
        {{ isRecording ? '‚èπÔ∏è –ó—É–ø–∏–Ω–∏—Ç–∏ –∑–∞–ø–∏—Å' : 'üî¥ –ü–æ—á–∞—Ç–∏ –∑–∞–ø–∏—Å' }}
        </button>

        <button class="button" (click)="toggleStream()">
          {{ isStreaming ? '‚èπÔ∏è –ó—É–ø–∏–Ω–∏—Ç–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é' : 'üì° –ü–æ—á–∞—Ç–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é' }}
        </button>

        <button class="button secondary">–û–Ω–æ–≤–∏—Ç–∏ –ø–æ–∫–∞–∑–Ω–∏–∫–∏</button>

        <!-- <button class="button" (click)="toggleMotionDetection()"
          [ngClass]="{ 'primary': isMotionEnabled, 'secondary': !isMotionEnabled }">
          {{ isMotionEnabled ? 'üõë –í–∏–º–∫–Ω—É—Ç–∏ –¥–µ—Ç–µ–∫—Ü—ñ—é —Ä—É—Ö—É' : 'üëÄ –£–≤—ñ–º–∫–Ω—É—Ç–∏ –¥–µ—Ç–µ–∫—Ü—ñ—é —Ä—É—Ö—É' }}
        </button> -->
        
        <!-- <button class="button secondary">üîá –í–∏–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫</button> -->
        <!-- <button class="button" [ngClass]="{ 'primary': isMuted, 'secondary': !isMuted }" (click)="toggleMute()">
          {{ isMuted ? 'üîä –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫' : 'üîá –í–∏–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫' }}
        </button> -->
        
      </div>
    </div>

    <div class="right-side">
      <div class="env-data-container">
        <h3>–ü–æ–∫–∞–∑–Ω–∏–∫–∏</h3>
      
        <div class="env-grid">
          <div class="env-card temperature">
            <div class="icon">üå°Ô∏è</div>
            <div class="label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</div>
            <div class="value">{{ temperature }} ¬∞C</div>
          </div>
      
          <div class="env-card pressure">
            <div class="icon">üå¨Ô∏è</div>
            <div class="label">–¢–∏—Å–∫</div>
            <div class="value">{{ pressure }} –≥–ü–∞</div>
          </div>
      
          <div class="env-card light">
            <div class="icon">üí°</div>
            <div class="label">–û—Å–≤—ñ—Ç–ª–µ–Ω—ñ—Å—Ç—å</div>
            <div class="value">{{ lightLevel }} –ª–∫</div>
          </div>
      
          <div class="env-card co2">
            <div class="icon">üü¢</div>
            <div class="label">CO‚ÇÇ</div>
            <div class="value">{{ co2Level }} ppm</div>
          </div>
        </div>
      </div>
      
      
      <div class="archive">
        <h3>–ê—Ä—Ö—ñ–≤ –ó–∞–ø–∏—Å—ñ–≤</h3>
        <ul>
          <li *ngFor="let rec of recordings">
            {{ rec.timestamp }}
            <a [href]="rec.url" download="{{ rec.filename }}">
              <button class="btn small">‚¨áÔ∏è</button>
            </a>
            <button class="btn small" (click)="playRecording(rec.url)">‚ñ∂Ô∏è</button>
          </li>
          <li>
            23.02.2025 14:30
            <button class="btn small">‚ñ∂Ô∏è</button>
          </li>
          <li>
            23.02.2025 14:30
            <button class="btn small">‚ñ∂Ô∏è</button>
          </li>
          <li>
            23.02.2025 14:30
            <button class="btn small">‚ñ∂Ô∏è</button>
          </li>
        </ul>
      </div>

    </div>
  </div>
</div>