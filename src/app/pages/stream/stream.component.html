<div class="stream-wrapper">
  <h2>Live –°—Ç—Ä—ñ–º</h2>

  <div class="content-layout">
    <div class="left-side">
      {{ isStreaming ? '—Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—è —É–≤—ñ–º–∫–Ω–µ–Ω–∞' : '—Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—è –≤–∏–º–∫–Ω–µ–Ω–∞' }}

      <div class="video-container" *ngIf="isStreaming">
        <!-- <img [src]="streamUrl" alt="Live stream" /> -->
        <img
        #streamImage
        [src]="streamUrl"
        (load)="onImageLoaded()"
        alt="Live stream"
      />
      
        <canvas #canvas hidden></canvas>

        <!-- <video src="assets/images/4444928-hd_1920_1080_30fps.mp4" controls autoplay muted playsinline></video> -->
      </div>

      <div class="controls">
        <!-- <button class="btn">üî¥ –ü–æ—á–∞—Ç–∏ –∑–∞–ø–∏—Å</button> -->
        <button 
        class="button" 
        [disabled]="!isStreaming"
        [ngClass]="{ 'primary': isRecording, 'secondary': !isRecording }"
        (click)="toggleRecording()">
        {{ isRecording ? '‚èπÔ∏è –ó—É–ø–∏–Ω–∏—Ç–∏ –∑–∞–ø–∏—Å' : 'üî¥ –ü–æ—á–∞—Ç–∏ –∑–∞–ø–∏—Å' }}
        </button>


        <button class="button" (click)="toggleMotionDetection()"
          [ngClass]="{ 'primary': isMotionEnabled, 'secondary': !isMotionEnabled }">
          {{ isMotionEnabled ? 'üõë –í–∏–º–∫–Ω—É—Ç–∏ –¥–µ—Ç–µ–∫—Ü—ñ—é —Ä—É—Ö—É' : 'üëÄ –£–≤—ñ–º–∫–Ω—É—Ç–∏ –¥–µ—Ç–µ–∫—Ü—ñ—é —Ä—É—Ö—É' }}
        </button>

        <!-- <button class="button secondary">üîá –í–∏–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫</button> -->
        <button class="button" [ngClass]="{ 'primary': isMuted, 'secondary': !isMuted }" (click)="toggleMute()">
          {{ isMuted ? 'üîä –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫' : 'üîá –í–∏–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫' }}
        </button>
        <button class="button" (click)="toggleStream()">
          {{ isStreaming ? '‚èπÔ∏è –ó—É–ø–∏–Ω–∏—Ç–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é' : 'üì° –ü–æ—á–∞—Ç–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—é' }}
        </button>
        <button class="button secondary">‚¨áÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–µ–æ</button>
      </div>
    </div>

    <div class="right-side">
      <div class="archive">
        <h3>–ê—Ä—Ö—ñ–≤ –ó–∞–ø–∏—Å—ñ–≤</h3>
        <ul>
          <li *ngFor="let rec of recordings">
            {{ rec.timestamp }}
            <a [href]="rec.url" download="{{ rec.filename }}">
              <button class="btn small">‚¨áÔ∏è</button>
            </a>
            <button class="btn small" (click)="playRecording(rec.url)">‚ñ∂Ô∏è</button>
          </li>
          <!-- <li>
            23.02.2025 14:30
            <button class="btn small">‚ñ∂Ô∏è</button>
          </li>
          <li>
            23.02.2025 14:30
            <button class="btn small">‚ñ∂Ô∏è</button>
          </li>
          <li>
            23.02.2025 14:30
            <button class="btn small">‚ñ∂Ô∏è</button>
          </li> -->
        </ul>
      </div>

      <div class="notifications">
        <h3>–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</h3>
        <div class="alert">
          ‚ö†Ô∏è –†—É—Ö –≤–∏—è–≤–ª–µ–Ω–æ <br />
          <small>ID: 1 ‚Äì 28.02.2025 10:21</small>
        </div>
        <div class="alert">
          ‚ö†Ô∏è –†—É—Ö –≤–∏—è–≤–ª–µ–Ω–æ <br />
          <small>ID: 2 ‚Äì 28.02.2025 10:22</small>
        </div>
      </div>
    </div>
  </div>
</div>